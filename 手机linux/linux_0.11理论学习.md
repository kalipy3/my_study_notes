### 注意寻址和物理内存的区别!!!!!!!!!!!

如：(寻址是1M,但内存在32位cpu中是4MB)页表含有2的20次(1M)方个表项，而每项占4字节，如果作为一个表来存放的话，它们最多将占用4MB的内存.


### 1.什么是选择符(段选择符)？
* a)cs ds es ss存放段选择符  
* b)存放段选择符的寄存器叫段寄存器，如cs es ds ss fs gs  
* c)段寄存器结构：段选择符+段基地址+限长+属性  
* d)根据存储在内存的描述符表来定位一个描述符（项）  

### 2.什么是物理地址？
* 物理内存是线性字节数组，每个字节具有唯一物理地址  

#### 2-1.什么是线性地址？
* 是处理器线性地址空间的32位地址，与物理地址空间类似  

### 3.什么是逻辑地址？
* 16位段加32位偏移构成的48位地址称为逻辑地址（虚拟地址），如cs:eip，逻辑地址经过内存管理机制转换到物理地址

### 4.分段与分页怎么转？
* a)为减小开销，一大块一大块的转  
* b)根据驻留在内存中的表的信息来转  
* c)这些表只有操作系统有权访问  

### 5.分段
* a)分段总是启用，分页是可选项  
* b)分隔代码 数据 堆栈区域  
* c)把逻辑地址转换为线性地址  
* d)段1选择符提供了描述符表中一个数据结构（段描述符）的偏移量每个段都有一个段描述符  
* e)段描述符指明该段的基地址，段的大小，访问权限等  
* f)线性地址=逻辑地址偏移量+该段基地址  
* g)线性地址与物理地址有相同结构  
* h)逻辑地址可包含最多16k的段，每个段最长4G，虚拟地址64TB,2的46次方，线形地址和物理地址为4G  
* i)未分页时，线形地址就是物理地址  

### 6.分页
* a)可以编写任意大的程序，如，一个60G的游戏，不可能在8G的cpu上运行
* b)分页支持虚拟存储：4g线性地址用小块物理内存和外部硬盘来模拟，每个段被划分为页面（通常4k），页面存储在外部硬盘或物理内存中,操作系统通过维护一个页目录和一些页表留意这些页面。  
* c)当程序访问一个线性地址时，处理器就会用页目录和页表把其转换为物理地址，然后在该内存上执行所要求的操作  
* d)如果当前访问页面不在物理内存中，cpu就会中断程序（通过产生一个页错误异常），然后操作系统就可以从硬盘把该页读入物理内存，并继续执行刚才被中断的程序。  

### 7.分段分页比较
***相同点：***

* a)都使用存储在内存中的变换表  

***不同点：***
* a)分段使用大小可变的内存块，更适合管理复杂系统的逻辑分区分页使用固定大小内存块，更适合管理物理内存
* b)所用表结构不同，段表存储在线形地址空间，页表存储在物理地址空间

### 8.每个任务都有自己的段表和页表

### 9.虚拟地址空间：
* a)操作系统存储在一个被所有任务能够共享的公共虚拟地址空间（全局地址空间）
* b)每个任务唯一的虚拟地址空间为局部地址空间
* c)由于每个任务具有不同的局部地址空间，因此两个不同的任务对相同虚拟地址空间的引用将被转换到不同的物理地址出。


### 10.段的定义：
* a)逻辑地址=段部分+偏移部分
* b)段=段基地址+段限长+段属性  
***注意：多个段映射到线形地址中的范围可以重叠，甚至完全覆盖
，你想啊，虚拟地址有几tb大小，物理地址只有4g大小
，当然是一对多的关系啊。***

### 11.段描述符(段描述符项)：
* a)存储了段基地址，段限长，段属性
* b)保存在内存中的段描述符表中
* c)长度8字节
* d)由编译器，连接器，加载器或操作系统创建，绝不是用户程序


### 12.段描述符表：
* a)是包含段描述符(项)的一个简单数组
* b)1中的段选择符即通过指定表中的一个段描述符的位置来指定
相应的段
* c)存储在由操作系统维护的特殊结构中，由cpu的内存管理硬件来引用,这些特殊结构保存在仅由操作系统访问的受保护内存中，以防止用户程序修改构造恶意地址转换信息


    请看93页及之后！！！！！！！！！！！！（重点）


### 13.什么是线性地址？
* 是处理器线性地址空间的32位地址，与物理地址空间类似

### 14.分页
* a)把线性地址转化为物理地址
* b)把线性地址空间划分为页面，再把这些线性地址空间页面转化为物理地址空间页面
* c)设置cr0的pg位为1开启分页操作
* d)80x86使用4k（2的12次方）字节固定大小的页面，一页4KB
* e)线性地址的低12比特位作为页内偏移量直接作为物理地址的低12位,分页机制重定位的功能可以看作是把线性地址的高20位转换到对应的物理地址高20位
* f)分页转换功能由驻留在内存中的表来描述，即页表，放于物理地址空间
* g)页表可以看作是简单的2的20次方(由于页面基地址对齐在4K边界，页面基地址的低12位为0)物理地址数组，线性地址到物理地址的映射功能可以简单看作是进行数组的查找
* h)线性地址的高20构成这个数组的索引值，用于选择对应的物理基地址，线性地址的低12位给出页面中的偏移量，加上页面基地址形成对应物理地址，即高20位页面基地址和12位偏移量组合得到物理地址
* i)页表中每个页表项大小32位，由于基地址中高20位中的12位为0的比特位未使用，所以用来存放页面的属性信息


### 15.线性地址可以被标注为无效，而非让其产生一个物理地址
***以下情况一个页面可以标注为无效：***
* a)操作系统不支持的线性地址（此时产生无效地址的程序必须被终结）
* b)对应在虚拟内存系统中的页面在磁盘上而非物理内存（此时实际上是请求操作系统虚拟内存管理器把对应页面从磁盘加载到物理内存）
* c)该无效地址存不存在由页面属性确定


### 16.两级页表结构：
* a)页表含有2的20次(1M)方个表项，而每项占4字节，如果作为一个表来存放的话，它们最多将占用4MB的内存
* b)为减小内存占用，80x86使用两级页表，高20位线性地址到物理地址转换分2步，每步转10个比特位
* c)第一级为页目录，第二级为页表(看pdf105-106页图)





















3.cs:eip ss:esp成对，ds是其它通用寄存器的默认数据段寄存器

4.（段内）偏移地址=基地址+偏移量(表述可能有歧义)

#未完待续~

